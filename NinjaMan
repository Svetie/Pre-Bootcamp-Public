<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NinjaMan</title>
    <style type='text/css'>
        * {
            margin: 0;
            padding: 0;
        }
        div {
            height: 100%;
            width: 100%;
            overflow:hidden;
        }
        .row {
            line-height: 0;
        }
        .wall {
            background-color: blue;
            height: 40px;
            width: 40px;
            display: inline-block;  /* makes it look like squares */
        }
        .sushi {
            background-color: black;
            height: 40px;
            width: 40px;
            display: inline-block;  /* makes it look like squares */
            background-image: url('Images/sushi.png');
            background-size: contain; /* conains within the element */
        }
        .onigiri {
            background-color: black;
            height: 40px;
            width: 40px;
            display: inline-block;  /* makes it look like squares */
            background-image: url('Images/onigiri.png');
            background-size: contain; /* conains within the element */
        }
        .blank {
            background-color: black;
            height: 40px;
            width: 40px;
            display: inline-block;  /* makes it look like squares */
        }
        #ninjaman { /* # id, . class*/
            background-color: black;
            height: 40px;
            width: 40px;
            display: inline-block;  /* makes it look like squares */
            background-image: url('Images/ninja.gif');
            background-size: contain; /* contains within the element */
            position: absolute;
            /* left: 40px;
            top: 40px; */
        }
    </style>
</head>
<body>
    <div id='world'></div>
    <div id='ninjaman'></div>
    <div id="score">You have eaten that many sushi</div>
    <div id='sushiScore'>0</div>
    <div id='oni'>You have eaten that many onigiri</div>
    <div id='onigiriScore'>0</div>
</body>
<script type='text/javascript'>
    var world = [
        [1,1,1,1,1],
        [1,0,2,2,1],
        [1,2,1,2,1],
        [1,2,2,2,1],
        [1,2,2,2,1],
        [1,2,1,2,1],
        [1,3,2,3,1],
        [1,2,2,2,1],
        [1,2,1,2,1],
        [1,3,2,3,1],
        [1,1,1,1,1]
    ];

    var world1 = [
        [1,1,1,1,1,1,1,1],
        [1,0,2,2,2,3,2,1],
        [1,2,1,2,1,1,2,1],
        [1,2,1,2,3,1,3,1],
        [1,2,2,2,2,1,2,1],
        [1,2,1,2,1,1,3,1],
        [1,3,1,3,3,2,3,1],
        [1,1,1,1,1,1,1,1]
    ];

    var world2 = [
        [1,1,1,1,1,1,1,1],
        [1,0,2,2,2,3,2,1],
        [1,2,1,2,1,1,2,1],
        [1,2,1,2,3,1,3,1],
        [1,2,2,2,2,1,2,1],
        [1,2,1,2,1,1,3,1],
        [1,3,1,3,3,2,3,1],
        [1,3,1,2,2,1,2,1],
        [1,1,1,1,1,1,1,1]
    ];

    var world3 = [
        [1,1,1,1,1,1,1,1,1,1],
        [1,0,2,2,2,3,2,3,1,1],
        [1,2,1,2,1,1,2,2,2,1],
        [1,2,1,2,3,1,3,3,3,1],
        [1,2,2,2,2,1,1,1,3,1],
        [1,2,1,2,1,1,3,3,3,1],
        [1,3,1,3,3,2,3,1,2,1],
        [1,3,1,2,2,1,2,1,2,1],
        [1,1,1,1,1,1,1,1,1,1]
    ];

    var random = Math.floor((Math.random() * 4));
    console.log('random = ', random)
    switch (random) {
        case 1:
            world = world1;
            break;
        case 2:
            world = world2;
            break;
        case 3:
            world = world3;
            break;
    }

    var worldDict = {
        0: 'blank',
        1: 'wall',
        2: 'sushi',
        3: 'onigiri'
    };
    function drawWorld(){
        output = "";
        for(var row = 0; row < world.length; row++){
            output += "<div class = 'row'>" /* dynamically create rows*/
            for(var x = 0; x < world[row].length; x++){
                output += "<div class = '"+ worldDict[world[row][x]] +"'></div>"
                // output += worldDict[world[row][x]];
            }
            output += "</div>";
        }
        document.getElementById('world').innerHTML = output;
    }
    drawWorld();

    var ninjaman = {
        x: 1,
        y: 1
    }

    function drawNinjaman(){
        document.getElementById('ninjaman').style.top = ninjaman.y * 40 + 'px';

        document.getElementById('ninjaman').style.left = ninjaman.x * 40 + 'px';

    }

    drawNinjaman();
    
    let sushiNum = document.getElementById('#sushiScore');
    let onigiriNum = document.getElementById('#onigiriScore');

    function displayScore(){
        document.getElementById('sushiScore').innerHTML = sushiNum;
        document.getElementById('onigiriScore').innerHTML = onigiriNum;
    }

    displayScore();
    document.onkeydown = function(e){
        /* if the coordinate is not wall*/
        if(e.keyCode == 37){
            if(world[ninjaman.y][ninjaman.x - 1] != 1){
                ninjaman.x--;
            }
        }
        if(e.keyCode == 39){
            if(world[ninjaman.y][ninjaman.x + 1] != 1){
                ninjaman.x++;
            }
        }
        if(e.keyCode == 38){
            if(world[ninjaman.y - 1][ninjaman.x ] != 1){
                ninjaman.y--;
            }
        }
        if(e.keyCode == 40){
            if(world[ninjaman.y + 1][ninjaman.x] != 1){
                ninjaman.y++;
            }
        }
        // let sushiNum = document.getElementById('#sushiScore');
        let onigiriNum = 0;
        if(world[ninjaman.y][ninjaman.x] == 2){
            world[ninjaman.y][ninjaman.x] = 0;
            sushiNum++;
            displayScore();
            console.log('sushi eaten:',sushiNum);
        }
        if(world[ninjaman.y][ninjaman.x] == 3){
            world[ninjaman.y][ninjaman.x] = 0;
            onigiriNum++;
            console.log('onigiri eaten:',onigiriNum);
        }
        drawWorld();
        drawNinjaman();
    }

</script>
</html>
